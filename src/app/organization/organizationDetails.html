<sidebar></sidebar>

<div id="page-content">
  <topbar></topbar>
  
  <breadcrumb></breadcrumb>
  
  <messages></messages>
  
  <div class="fadein">
    <div id="page-title" class="clearfix">
      <h1 class="pull-left">Organization: {{name}}</h1>
      <div class="pull-right">
	<a class="action action-edit" ng-click="editOrganization()" title="Edit"><i class="fa fa-lg fa-pencil"></i></a>
        <a class="action action-delete" ng-click="deleteOrganization()" title="Delete"><i class="fa fa-lg fa-trash"></i></a>
      </div>
    </div><!-- /#page-title -->
    
    <div id="page-content-wrap" class="clearfix">
      <div class="row">
	<div class="col-md-12">
	  <div class="panel panel-default">
	    <div class="panel-heading">
	      <h3 class="panel-title">Quota</h3>
	    </div>
	    <div class="panel-body">
	      <div class="progress">
		<div class="progress-bar" role="progressbar" aria-valuenow="{{usedQuotaPercent}}" aria-valuemin="0" aria-valuemax="100">
		  {{usedQuotaPercent | limitTo:4}}% 
		</div>
	      </div>
	      <p>{{spacesTotalQuota}} MB of {{organizationTotalQuota}} MB limit</p>
	    </div>
	  </div><!-- /.panel -->
	</div>
      </div><!-- /.row -->
      <div class="col-sm-12 col-md-6">
        <div class="panel panel-default">
          <div class="panel-heading clearfix">
            <h3 class="panel-title pull-left">Auditors <span class="label label-default">{{nrOfAuditors}}<span></h3>
            <a class="btn btn-success pull-right"><i class="fa fa-plus"></i>&nbsp; Add a auditor</a>
          </div>
          <div class="table-responsive"><table class="table table-striped table-hover has-actions">
              <thead>
                <tr>
                  <th>Id</th>
                  <th>Admin</th>
                  <th>Active</th>
                  <th>Username</th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="auditor in auditors">
                  <td>{{auditor.id}}</td>
                  <td>{{auditor.admin}}</td>
                  <td>{{auditor.active}}</td>
                  <td>{{auditor.username}}</td>
                </tr>
              </tbody>
          </table></div>
        </div><!-- /.panel -->
      </div>
      <div class="col-sm-12 col-md-6">
        <div class="panel panel-default">
          <div class="panel-heading clearfix">
            <h3 class="panel-title pull-left">Billing Managers <span class="label label-default">{{nrOfBillingManagers}}<span></h3>
            <a class="btn btn-success pull-right"><i class="fa fa-plus"></i>&nbsp; Add a billing manager</a>
          </div>
          <div class="table-responsive"><table class="table table-striped table-hover has-actions">
              <thead>
                <tr>
                  <th>Id</th>
                  <th>Admin</th>
                  <th>Active</th>
                  <th>Username</th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="billingManager in billingManagers">
                  <td>{{billingManager.id}}</td>
                  <td>{{billingManager.admin}}</td>
                  <td>{{billingManager.active}}</td>
                  <td>{{billingManager.username}}</td>
                </tr>
              </tbody>
          </table></div>
        </div><!-- /.panel -->
      </div>
      <div class="col-sm-12 col-md-6">
        <div class="panel panel-default">
          <div class="panel-heading clearfix">
            <h3 class="panel-title pull-left">Managers <span class="label label-default">{{nrOfManagers}}<span></h3>
            <a href="#/organizations/{{organizationId}}/spaces/{{spaceId}}/marketplace" class="btn btn-success pull-right"><i class="fa fa-plus"></i>&nbsp; Add a manager</a>
          </div>
          <div class="table-responsive"><table class="table table-striped table-hover has-actions">
              <thead>
                <tr>
                  <th>Id</th>
                  <th>Admin</th>
                  <th>Active</th>
                  <th>Username</th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="manager in managers">
                  <td>{{manager.id}}</td>
                  <td>{{manager.admin}}</td>
                  <td>{{manager.active}}</td>
                  <td>{{manager.username}}</td>
                </tr>
              </tbody>
          </table></div>
        </div><!-- /.panel -->
      </div>
        <div class="col-sm-12 col-md-6">
          <div class="panel panel-default">
            <div class="panel-heading clearfix">
              <h3 class="panel-title pull-left">Private Domains <span class="label label-default">{{nrOfPrivateDomains}}<span></h3>
              <a class="btn btn-success pull-right"><i class="fa fa-plus"></i>&nbsp; Add a private domain</a>
            </div>
            <div class="table-responsive"><table class="table table-striped table-hover has-actions">
		<thead>
                  <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Organization Id</th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="privateDomain in privateDomains">
                  <td>{{privateDomain.id}}</td>
                  <td>{{privateDomain.name}}</td>
                  <td>{{privateDomain.owning_organization_guid}}</td>
                </tr>
              </tbody>
            </table></div>
          </div><!-- /.panel -->
	</div>
	<div class="col-sm-12 col-md-6">
          <div class="panel panel-default">
            <div class="panel-heading clearfix">
              <h3 class="panel-title pull-left">Services <span class="label label-default">{{nrOfServices}}<span></h3>
              <a href="#/organizations/{{organizationId}}/spaces/{{spaceId}}/marketplace" class="btn btn-success pull-right"><i class="fa fa-plus"></i>&nbsp; Add a service</a>
            </div>
            <div class="table-responsive"><table class="table table-striped table-hover has-actions">
		<thead>
                  <tr>
                    <th>Id</th>
                    <th>Label</th>
                    <th>Provider</th>
		    <th>Description</th>
		    <th>Long Description</th>
		    <th>Version</th>
		    <th>Info Url</th>
		    <th>Active</th>
		    <th>Bindable</th>
		    <th>Extra</th>
		    <th>Documentation Url</th>
		    <th>Service Broker Guid</th>
		    <th>Plan Updateable</th>
		    <th>Action</th>
                  </tr>
		</thead>
              <tbody>
                <tr ng-repeat="service in services" ng-click="showService(service.id,$event)">
                  <td>{{service.id}}</td>
                  <td><a href="#/organizations/{{id}}/services/{{service.id}}">{{service.label}}</a></td>
                  <td>{{service.provider}}</td>
		  <td>{{service.description}}</td>
		  <td>{{service.long_description}}</td>
		  <td>{{service.version}}</td>
		  <td>{{service.info_url}}</td>
		  <td>{{service.active}}</td>
		  <td>{{service.bindable}}</td>
		  <td>{{service.extra}}</td>
		  <td>{{service.documentation_url}}</td>
		  <td>{{service.service_broker_guid}}</td>
		  <td>{{service.plan_updateable}}</td>
                  <td>
                    <a class="action" href="#/organizations/{{organizationId}}/spaces/{{spaceId}}/serviceInstance/{{serviceInstance.id}}" title="Details"><i class="fa fa-lg fa-eye"></i></a>
		    <a class="action" href="{{service.supportURL}}" target="_blank" title="Support"><i class="fa fa-lg fa fa-question"></i></a>
                    <a class="action" href="{{service.docsURL}}" target="_blank" title="Docs"><i class="fa fa-lg fa fa-file"></i></a>
                    <a class="action" href="{{service.dashboardUrl}}" target="_blank" title="Manage"><i class="fa fa-lg fa fa-cog"></i></a>
                    <a class="action action-delete" ng-click="deleteServiceInstance(service)" title="Delete"><i class="fa fa-lg fa-trash"></i></a>
                  </td>
                </tr>
              </tbody>
            </table></div>
          </div><!-- /.panel -->
        </div>
	<div class="col-sm-12 col-md-6">
          <div class="panel panel-default">
            <div class="panel-heading clearfix">
              <h3 class="panel-title pull-left">Space Quota Definitions <span class="label label-default">{{nrOfSpaceQuotaDefinitions}}<span></h3>
              <a class="btn btn-success pull-right"><i class="fa fa-plus"></i>&nbsp; Add a space quota definition</a>
            </div>
            <div class="table-responsive"><table class="table table-striped table-hover has-actions">
		<thead>
                  <tr>
                    <th>Id</th>
		    <th>Name</th>
                    <th>Organization Id</th>
		    <th>Non Basic Services Allowed</th>
		    <th>Total Services</th>
		    <th>Total Routes</th>
		    <th>Memory Limit</th>
		    <th>Instance Memory Limit</th>
		    <th>App Instance Limit</th>
		    <th>App Task Limit</th>
		    <th>Total Service Key</th>
		    <th>Total Reserved Route Ports</th>
                  </tr>
                </thead>
              <tbody>
                <tr ng-repeat="spaceQuotaDefinition in spaceQuotaDefinitions" ng-click="showService(service.id,$event)">
                  <td>{{spaceQuotaDefinition.id}}</td>
                  <td>{{spaceQuotaDefinition.name}}</td>
                  <td>{{spaceQuotaDefinition.organization_guid}}</td>
                  <td>{{spaceQuotaDefinition.non_basic_services_allowed}}</td>
                  <td>{{spaceQuotaDefinition.total_services}}</td>
                  <td>{{spaceQuotaDefinition.total_routes}}</td>
		  <td>{{spaceQuotaDefinition.memory_limit}}</td>
		  <td>{{spaceQuotaDefinition.instance_memory_limit}}</td>
		  <td>{{spaceQuotaDefinition.app_instance_limit}}</td>
		  <td>{{spaceQuotaDefinition.app_task_limit}}</td>
		  <td>{{spaceQuotaDefinition.total_service_key}}</td>
		  <td>{{spaceQuotaDefinition.total_reserved_route_ports</td>
                </tr>
              </tbody>
            </table></div>
          </div><!-- /.panel -->
        </div>
	<div class="col-md-6">
          <div class="panel panel-default">
            <div class="panel-heading clearfix">
              <h3 class="panel-title pull-left">Users <span class="label label-default">{{nrOfAllUsers}}</span></h3>
              <a class="btn btn-success pull-right" ng-click="addSpace()"><i class="fa fa-plus"></i>&nbsp; Add a user</a>
            </div>
            <div class="table-responsive"><table class="table table-striped table-hover has-actions">
                <thead>
                  <tr>
                    <th>Id</th>
                    <th>Admin</th>
                    <th>Active</th>
                    <th>Username</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="user in allUsers" ng-click="showSpace(space.id, $event)" style="cursor: pointer">
                    <td>{{user.id}}</td>
                    <td>{{user.admin}}</td>
		    <td>{{user.active}}</td>
		    <td>{{user.username}}</td>
                    <td>
                      <a class="action action-edit" ng-click="editSpace(space); $event.stopPropagation();" title="Edit"><i class="fa fa-lg fa-pencil"></i></a>
                      <a class="action action-delete" ng-click="deleteSpace(space); $event.stopPropagation();" title="Delete"><i class="fa fa-lg fa-trash"></i></a>
                    </td>
                  </tr>
		</tbody>
            </table></div>
          </div>
        </div>
	<div class="row">
	<div class="col-md-6">
	  <div class="panel panel-default">
	    <div class="panel-heading clearfix">
	      <h3 class="panel-title pull-left">Spaces <span class="label label-default">{{nrOfSpaces}}</span></h3>
	      <a class="btn btn-success pull-right" ng-click="addSpace()"><i class="fa fa-plus"></i>&nbsp; Add a space</a>
	    </div>
	    <div class="table-responsive"><table class="table table-striped table-hover has-actions">
		<thead>
		  <tr>
		    <th>Name</th>
		    <th>Apps</th>
		    <th>Services</th>
		    <th>Memory</th>
		    <th>Action</th>
		  </tr>
		</thead>
		<tbody>
		  <tr ng-repeat="space in spaces" ng-click="showSpace(space.id, $event)" style="cursor: pointer">
		    <td><a href="#/organizations/{{id}}/spaces/{{space.id}}">{{space.name}}</a></td>
		    <td>
		      <span class="label label-success label-responsive">{{space.nrOfStartedApps}} <span class="toggle-text">running</span></span>
		      <span class="label label-danger label-responsive">{{space.nrOfCrashedApps}} <span class="toggle-text">crashed</span></span>
		      <span class="label label-default label-responsive">{{space.nrOfStoppedApps}} <span class="toggle-text">stopped</span></span>
		    </td>
		    <td>{{space.nrOfServices}}</td>
		    <td>{{space.memory}} MB</td>
		    <td>
		      <a class="action action-edit" ng-click="editSpace(space); $event.stopPropagation();" title="Edit"><i class="fa fa-lg fa-pencil"></i></a>
		      <a class="action action-delete" ng-click="deleteSpace(space); $event.stopPropagation();" title="Delete"><i class="fa fa-lg fa-trash"></i></a>
		    </td>
		  </tr>
		</tbody>
	    </table></div>
	  </div><!-- /.panel -->
	</div>	
	<div class="col-md-6">
	  <div class="panel panel-default">
	    <div class="panel-heading clearfix">
	      <h3 class="panel-title pull-left">Domains <span class="label label-default">{{nrOfDomains}}</span></h3>
	      <a ng-click="newDomain()" class="btn btn-success pull-right"><i class="fa fa-plus"></i>&nbsp; Add a domain</a>
	    </div>
	    <div class="table-responsive"><table class="table table-striped table-hover has-actions">
		<thead>
		  <tr>
		    <th>Id</th>
		    <th>Name</th>
		    <th>Action</th>
		  </tr>
		</thead>
		<tbody>
                <tr ng-repeat="domain in domains" ng-click="showService(service.id, $event)">
                  <td>{{domain.id}}</td>
                  <td>{{domain.name}}</td>
                  <td>
                    <a class="action" href="#/organizations/{{organizationId}}/spaces/{{spaceId}}/serviceInstance/{{serviceInstance.id}}" title="Details"><i class="fa fa-lg fa-eye"></i></a>
                    <a class="action" href="{{service.supportURL}}" target="_blank" title="Support"><i class="fa fa-lg fa fa-question"></i></a>
                    <a class="action" href="{{service.docsURL}}" target="_blank" title="Docs"><i\
class="fa fa-lg fa fa-file"></i></a>
                    <a class="action" href="{{service.dashboardUrl}}" target="_blank" title="Manage"><i class="fa fa-lg fa fa-cog"></i></a>
                    <a class="action action-delete" ng-click="deleteServiceInstance(service)" title="Delete"><i class="fa fa-lg fa-trash"></i></a>
                  </td>
                </tr>
		</tbody>
	    </table></div>
	  </div><!-- /.panel -->
	</div>	
	<div class="col-md-6">
	  <div class="panel panel-default">
	    <div class="panel-heading clearfix">
	      <h3 class="panel-title pull-left">Users <span class="label label-default">{{nrOfOrganizationUsers}}</span></h3>
	      <a ng-click="addUser()" class="btn btn-success pull-right"><i class="fa fa-plus"></i>&nbsp; Add a user</a>
	    </div>
	    <div class="table-responsive"><table class="table table-striped table-hover has-action">
		<thead>
		  <tr>
		    <th>Name</th>
		    <th>Org Manager</th>
		    <th>Org Auditor</th>
		    <th>Billing Manager</th>
		    <th>Action</th>
		  </tr>
		</thead>
		<tbody>
		  <tr ng-repeat="user in users | orderBy:name:false">
		    <td>{{user.id}}</td>
		    <td>
		      <a class="action action-add" ng-click="deleteManager(user.id)"><i class="fa fa-lg fa-check-square-o"></i></a>
		      <a class="action action-delete" ng-click="addManager(user.name)"><i class="fa fa-lg fa-square-o"></i></a>
		      &nbsp;<i class="fa fa-lg fa-check"></i>
		    </td>
		    <td>
		      <a class="action action-add" ng-click="deleteAuditor(user.id)"><i class="fa fa-lg fa-check-square-o"></i></a>
		      <a class="action action-delete" ng-click="addAuditor(user.name)"><i class="fa fa-lg fa-square-o"></i></a>
		    </td>
		    <td>
		      <a class="action action-add" ng-click="deleteBillingManager(user.id)"><i class="fa fa-lg fa-check-square-o"></i></a>
		      <a class="action action-delete" ng-click="addBillingManager(user.name)"><i class="fa fa-lg fa-square-o"></i></a>
		    </td>
		    <td>
		      <a class="action action-delete" ng-click="disassociateUser(user)"><i class="fa fa-lg fa-trash"></i></a>&nbsp;&nbsp;
		    </td>
		  </tr>
		</tbody>
	    </table></div>
	    <div class="table-responsive"><table class="table table-striped table-hover has-actions">
		<thead>
		  <tr>
		    <th>Name</th>
		    <th>Org Manager</th>
		    <th>Org Auditor<th>
		    <th>Billing Manager</th>
		    <th>&nbsp;</th>
		  </tr>
		</thead>
		<tbody>
		  <tr ng-repeat="user in users | orderBy:name:false">
		    <td>{{user.id}}</td>
		    <td>
		      <i class="fa fa-lg fa-check"></i>
		      <i class="fa fa-lg fa-close"></i>
		    </td>
		    <td>
		      <i class="fa fa-lg fa-check"></i>
		      <i class="fa fa-lg fa-close"></i>
		    </td>
		    <td>
		      <i class="fa fa-lg fa-check"></i>
		      <i class="fa fa-lg fa-close"></i>
		    </td>
		    <td>
		      &nbsp;
		  </tr>
		</tbody>
	    </table></div>
	  </div><!-- /.panel -->
	</div>
	 <div class="col-md-6">
          <div class="panel panel-default">
            <div class="panel-heading clearfix">
              <h3 class="panel-title pull-left">Organization instance usage</h3>
            </div>
            <div class="table-responsive"><table class="table table-striped table-hover has-actions">
                <thead>
                  <tr>
                    <th>Instance usage</th>
                  </tr>
                </thead>
                <tbody>
                <tr ng-repeat="usage in instanceUsage">
                  <td>{{usage.instance_usage}}</td>
                </tr>
              </tbody>
	    </table></div>
          </div><!-- /.panel -->
         </div>
	   <div class="col-md-6">
          <div class="panel panel-default">
            <div class="panel-heading clearfix">
              <h3 class="panel-title pull-left">Organization memory usage</h3>
            </div>
            <div class="table-responsive"><table class="table table-striped table-hover has-actions">
                <thead>
                  <tr>
                    <th>Memory usage</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="usage in memoryUsage">
                    <td>{{usage.memory_usage}}</td>
                  </tr>
		</tbody>
            </table></div>
          </div><!-- /.panel -->
           </div>
	</div><!-- /.row -->
    </div><!-- /#page-content-wrap -->
  </div>
</div><!-- /#page-content -->
